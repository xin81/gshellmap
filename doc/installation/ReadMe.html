<!DOCTYPE html>
<html>
<head>
<title>Installation and Compilation</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" />
<meta name="author" content="Nguyen Viet Tan" />
<meta name="date" content="26/02/2015" />
<meta name="language" content="en-GB" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="Documentation on the desktop application GShell Map (by Nguyen Viet Tan). This document explains the installation, the compilation, and execution of this application." />
<meta name="keywords" content="GoogleMap API, GoogleMap Services, Distance Matrix API, Geocoding API, Elevation API, phone book, Google WebService" />
</head>
<body>
<h1>Contents</h1>
<ol>
<li><a href="#setup">Setup Instruction for GShell Map</a></li>
<li><a href="#start">Get Started</a></li>
<li><a href="#mysql">Setup your database for GPhonebook</a></li>
</ol>

<h1><a id="#setup">Setup Instruction for GShell Map</a></h1>
<i>by Nguễn Việt Tân</i> (阮越新)
<h2>Installation and Compilation</h2>
This application depends on
<ul>
<li><a href="https://github.com/googlemaps/google-maps-services-java">google-maps-services-java-master</a></li>
<li><a href="https://github.com/square/okio">okio-master</a></li>
<li><a href="http://grepcode.com/snapshot/repo1.maven.org/maven2/com.google.code.gson/gson/2.3.1">gson-2.3.1.jar</a></li>
<li><a href="http://dev.mysql.com/downloads/connector/j/">mysql-connector-java-5.1.34-bin.jar</a></li>
<li><a href="https://android.googlesource.com/platform/external/okhttp/+/master">okhttp-2.2.0.jar</a></li>
<li><a href="https://github.com/JodaOrg/joda-time">joda-time-2.7.jar</a></li>
</ul>

<a href="https://github.com/square/okio">okio-master</a> depends on <a href="http://mojo.codehaus.org/animal-sniffer/animal-sniffer-annotations/source-repository.html">animal-sniffer</a>.<br />
Unless you want to make use of the .jar files which I provided in the subfolder "libs" for you, you also might need these additional .jar files to get all depending projects compiled:
<ul>
<li><a href="http://caliper.googlecode.com/files/caliper-1.0-beta-1-all.jar">caliper-1.0-beta-1-all.jar</a>
<li><a href="http://archive.apache.org/dist/commons/cli/binaries/">commons-cli-1.2.jar</a></li>
<li><a href="http://junit.org/">hamcrest-core-1.3.jar</a></li>
<li><a href="http://hc.apache.org/downloads.cgi">httpclient-4.4.jar</a></li>
<li><a href="http://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore/4.4">httpcore-4.4.jar</a></li>
<li><a href="http://www.bouncycastle.org/latest_releases.html">jce-jdk13-151.jar</a></li>
<li><a href="http://jsoup.org/download">jsoup-1.8.1.jar</a></li>
<li><a href="http://junit.org/">junit-4.10.jar</a></li>
<li><a href="http://www.java2s.com/Code/Jar/n/Downloadnettyall402finaljar.htm">netty-all-4.0.25.Final.jar</a></li>
<li><a href="http://mvnrepository.com/artifact/org.openjdk.jmh/jmh-core/1.6">jmh-core#1.6.jar</a></li>
<li><a href="http://www.java2s.com/Code/Jar/g/Downloadgradlewrapperjar.htm">gradle-wrapper.jar</a></li>
<li><a href="https://code.google.com/p/mockito/downloads/list">mockito-all-1.9.5.jar</a></li>
<li><a href="http://mockwebserver.googlecode.com/files/mockwebserver-20120401.jar">mockwebserver-20120401.jar</a></li>
</ul>
But by using the "libs" subfolder, you shouldn't have to check out all those projects.<br />
<p>
After downloading all necessary projects and .jar files, your workspace should look similar to the screenshot below.
In my eclipse workspace, the projects <i>animal-sniffer, google-maps-services-java-master, okio-master,</i>
and of course <i>GoogleMap</i> (my own Java Project for the GShell Map application)
are connected to each other due to their dependencies.<br />
<img src="workspace03.png" alt="screenshot of the author's workspace" width="30%" />
</p>

<h2>Google API-Key</h2>
To use this application, you need a Google Developer account, and an API-Key. Follow the instructions on
<a href="https://developers.google.com/maps/documentation/webservices/client-library#requirements">developers.google.com</a>
to set up a developer account, and to receive an API-key from Google.
Once you have an account, log into <a href="https://code.google.com/apis/console/?noredirect">Google APIs Console</a>,
and enable these following web services:
<ul>
<li><a href="https://developers.google.com/maps/documentation/directions">Directory API</a></li>
<li><a href="https://developers.google.com/maps/documentation/distancematrix">Distance Matrix API</a></li>
<li><a href="https://developers.google.com/maps/documentation/elevation">Elevation API</a></li>
<li><a href="https://developers.google.com/maps/documentation/geocoding">Geocoding API</a></li>
</ul>
<h1><a id="start">Get Started</a></h1>
<h2>Execute GShell Map</h2>
Before you run this program, please edit <b>txt/settings.properties</b>, and change the values of
apiKey, mysql_user, and mysql_password into your own user data.
If you want to run shell.mysql.GPhonebook to look up addresses and phone numbers, you need to 
install a <a href="http://dev.mysql.com/downloads">mysql server</a>. Afterwards, follow the instructions of the section
<a href="#mysql">Create the database phonebook for GPhonebook</a>

<br />
## txt/settings.txt<br />
<p class="code">apiKey:YOUR_OWN_API-KEY<br />
mysql_user:YOUR_OWN_MYSQL_USERNAME<br />
mysql_password:YOUR_OWN_MYSQL_PASSWORD
</p>

<h3><a id="eclpse">Run GShell Map in Eclipse</a></h3>
<img src="eclipse.png" alt="Running GShell Map in eclipse" align="bottom" />
Running GShell Map in an IDE (<b>I</b>ntegrated <b>D</b>elevopment <b>E</b>nvironment") is the easiest way.
Assume, your subfolder <div class="code">LIB_PATH</code> contains all requiring .jar files,
then import this GShellMap project to your workspace, and add LIB_PATH/*.jar files to the build path.
Finally, compile everything by clicking "Save All".
To run the actual GShell Map application, select the GShell Map project, start a new launch configuration,
and choose one of these main classes:
<ul>
<li>shell.distance.GMapShell</li>
<li>shell.geometry.GooMetryShell</li>
<li>shell.mysql.GPhonebook</li>
</ul>
It should work with any Java supporting IDE like <a href="http://archive.eclipse.org/eclipse/downloads/drops/R-3.8-201206081200/index.php#EclipseSDK">eclipse</a>.

<h3>Run GShell Map in a shell box/command line (cmd)/console</h3>
GShell Map consists of several packages and main classes (GMapShell, GooMetryShell, GPhonebook, ...).
All main classes have been compressed in <i>gshellmap.jar</i>.
Unfortunately, Google Map Service, and Okio don't provide any .jar files (at the time of this writing).
I had to download those open source projects, and compile them for myself. After the compilation, I archived the binaries into
<ul>
<li>gmapservice.jar (Google Map Service)</li>
<li>okio.jar (Okio)</li>
</ul>

and stored them in the subfolder <div class="code">LIB_PATH</div>

In general, the command for running this application looks like this:<br />
<div class="code">java -cp .:$CLASSPATH $MAIN_CLASS
--parameter0 value0 --parameter1 value1 ... --parameter(n-1) --value(n-1)</div><br />
$CLASSPATH contains
<ul>
<li><div class="code">LIB_PATH</div>/okhttp-2.2.0.jar</li>
<li><div class="code">LIB_PATH</div>/gson-2.3.1.jar</li>
<li><div class="code">LIB_PATH</div>/joda-time-2.7.jar</li>
<li><div class="code">LIB_PATH</div>/mysql-connector-java-5.1.34-bin.jar</li>
<li><div class="code">LIB_PATH</div>/gmapservice.jar</li>
<li><div class="code">LIB_PATH</div>/okio.jar</li>
<li>gshellmap.jar</li>
</ul>

$MAIN_CLASS can be any of these ones (see also <a href="#eclipse">Run GShell Map in Eclipse</a>):
<ul>
<li>shell.distance.GMapShell</li>
<li>shell.geometry.GooMetryShell</li>
<li>shell.mysql.GPhonebook</li>
</ul>

If you don't want to type in all those libraries by hand, use these following shell scripts to get started immediately:
<ul>
<li>help (prints out help information on this shell script, and how to execute any programs)</li>
<li>gshellmap.sh (executes shell.distance.GMapShell with default options)</li>
<li>gshellmetry.sh (executes shell.geometry.GooMetryShell ...)</li>
<li>gphonebook.sh (executes shell.mysql.GPhonebook)</li>
</ul>
<h3>Run GMapShell</h3>
Once you edit txt/settings.properties, the program will find your API-Key in the text file.

<img src="gshellmap.png" alt="GMapShell" />
<div class="code">java -cp $CLASSPATH shell.distance.GMapShell $OPTIONAL_PARAMETERS</div><br />
GMapShell calculates distances and travel duration between an origin (start point location), and a destination (end point location).
It also retrieves latitude -, longitude -, and elevation values for each given address.
<p class="code"><br />
Optional Parameters:<br />
--help prints this help information<br />
--language [de, en, en-GB, en-AU, es, fr, ...] see also https://developers.google.com/maps/faq#languagesupport<br />
--unit [IMPERIAL (in feet, or miles)|METRIC (in metres, or kilometres)]<br />
--mode [driving|bicycling|walking|transit]<br />
--fuzzy [false|true]; if true, simple string queries can be performed  (e. g. origin address: England, destination address: Germany<br />
--routes [false|true]; if set true, all routes (directions) from the start address to the end address are listed<br />
</p>

<h3>Run GooMetryShell</h3>
<img src="gmetryshell.png" alt="GooMetryShell" />
<div class="code">java -cp $CLASSPATH shell.geometry.GooMetryShell $PARAMETERS $OPTIONAL_PARAMETERS</div><br />
GooMetryShell retrieves addresses by given coordinate values (latitude and longitude).

<p class="code"><br />
PARAMETERS:<br />
--latitude	[-90.000000, 90.000000]<br />
--longitude	[-179.999999, 180.000000]
</p>

<p class="code">
Optional Parameters:<br />
--help	prints this help information
</p>

<h3>Run GPhonebook</h3>
<img src="gphonebook.png" alt="GPhoneBook" />
<div class="code">java -cp $CLASSPATH shell.mysql.GPhonebook $PARAMETERS $OPTIONAL_PARAMETERS</div><br />
GPhonebook works like a phone book. In the first place, it looks up fixed-line numbers, and street addresses (by given latitude and longitude values) which are stored in a database.
In addition, it also retrieves email addresses and mobile/cell phone numbers.

<p class="code"><br />
PARAMETERS:<br/>
--query	[all|address|email|phone]
</p>

<p class="code">
OPTIONAL_PARAMETERS<br />
--help	print this help information
</p>

<h1><a id="mysql">Setup your database for GPhonebook</a></h1>
If you're not familiar with <a href="http://www.mysql.com">MySQL</a>, here's a good
<a href="http://dev.mysql.com/doc/refman/4.1/en/tutorial.html">tutorial</a> for beginners.
<h2>Create the database phonebook, and add some tables</h2>
After successfully <a href="http://dev.mysql.com/doc/refman/4.1/en/installing.html">installing mysql</a>, create the database phonebook and the tables. All create statements are saved in
<b>sql/creates.sql</b>
<ul>
<li>person</li>
<li>email</li>
<li>phone</li>
</ul> 

<pre>
--creates.sql
CREATE DATABASE phonebok;

CREATE TABLE person(
id SMALLINT NOT NULL AUTO_INCREMENT,
lastname VARCHAR(16) NOT NULL,
name VARCHAR(70) NOT NULL,
latitude DOUBLE NOT NULL,
longitude DOUBLE NOT NULL,
elevation DOUBLE,
PRIMARY KEY(id));

CREATE TABLE email(
address VARCHAR(90) NOT NULL，
pid SMALLINT NOT NULL,
PRIMARY KEY(address),
FOREIGN KEY(pid) REFERENCES person(id));

CREATE TABLE phone(
phid SMALLINT NOT NULL AUTO_INCREMENT,
area_code SMALLINT NOT NULL,
number BIGINT NOT NULL,
pid SMALLINT NOT NULL,
PRIMARY KEY(phid),
FOREIGN KEY(pid) REFERENCES person(id));
</pre>

<h2>Populate your tables with some data</h2>
Now you can populate your tables like this:
<pre>
-- inserts.sql
-- examples for insert statements
INSERT INTO person(lastname, name, latitude, longitude)VALUES('Langstrump', 'Pippilotta Viktualia Rullgardina Krusmynta Efraimsdotter', 59.329444, 18.068611);
INSERT INTO email(address, pid)VALUES('pippilotta.viktualia.rullgardina.krusmynta.efraimsdotter.langstrump@gmail.se', 1);
INSERT INTO phone(area_code, number, pid)VALUES(46, 2343923433623439336, 1);
</pre>
The insert statements above are saved in <b>sql/inserts.sql</b>
</body>
</html>